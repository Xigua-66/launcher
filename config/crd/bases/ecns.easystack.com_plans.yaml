---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: plans.ecns.easystack.com
spec:
  group: ecns.easystack.com
  names:
    kind: Plan
    listKind: PlanList
    plural: plans
    singular: plan
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: Plan is the Schema for the plans API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: PlanSpec defines the desired state of Plan
            properties:
              ansible_plan_auto:
                description: AnsiblePlanAuto  decide to auto to run ansible plan
                type: boolean
              cluster_name:
                description: ClusterName is the cluster name => clusters.cluster.x-k8s.io
                  --------------------------------=> openstackclusters.infrastructure.cluster.x-k8s.io
                type: string
              cni_type:
                description: CniType is the cni type
                type: string
              cni_work_mode:
                description: CniWorkMode is the cni work mode
                type: string
              dns_nameservers:
                description: DNSNameservers is the dns nameservers of subnet which
                  auto created
                items:
                  type: string
                type: array
              external_network_id:
                description: externalNetworkId is the external network id WHEN use_float_ip
                  is true, we will get a fip from this network
                type: string
              k8sVersion:
                description: K8sVersion is the version of kubernetes => ansible kubernetes
                  tag
                type: string
              lb_enable:
                description: LBEnable is the flag to decide to create lb or no
                type: boolean
              machine_sets:
                items:
                  description: MachineSetReconcile is the  machine config Maybe we
                    should create a Bastion machine for master machine to access and
                    set the SSH  rsa  to the Bastion machine
                  properties:
                    infras:
                      description: Infras is the infras of machine
                      items:
                        properties:
                          availability_zone:
                            description: AvailabilityZone are a set of failure domains
                              for machines decide the every machine's AZ
                            type: string
                          flavor:
                            description: Flavor is the flavor of machine
                            type: string
                          image:
                            description: image is the image of machine
                            type: string
                          replica:
                            description: replica is the replica of machine
                            format: int32
                            type: integer
                          subnets:
                            description: subnets are a set of subnets for machines
                              decide the every machine's subnet when NetMode == existed,
                              the subnets is required
                            properties:
                              fix_ip:
                                description: FixIP is the fix ip of subnet
                                type: string
                              subnet_network:
                                description: SubnetNetwork is the network of subnet
                                type: string
                              subnet_uuid:
                                description: uuid is the subnet uuid of subnet
                                type: string
                            required:
                            - fix_ip
                            - subnet_network
                            - subnet_uuid
                            type: object
                          uid:
                            description: UID is the uid of infra
                            type: string
                          volumes:
                            description: Volumes are the volume type of machine,include
                              root volume and data volume
                            items:
                              properties:
                                index:
                                  description: Index is the index of volume 0==root
                                    volume
                                  type: integer
                                volume_size:
                                  description: VolumeSize is the volume size of machine
                                  type: integer
                                volume_type:
                                  description: VolumeType is the volume type of machine
                                  type: string
                              required:
                              - index
                              - volume_size
                              - volume_type
                              type: object
                            type: array
                        required:
                        - availability_zone
                        - flavor
                        - image
                        - replica
                        - uid
                        type: object
                      type: array
                    init:
                      description: CloudInit is the cloud init secret of machine,base64
                        file,can use it to config the machine such as init disk...
                      type: string
                    name:
                      description: Name is the name of machine
                      type: string
                    number:
                      description: Number is the number of all machine
                      format: int32
                      type: integer
                    role:
                      description: Role is the role of machine
                      type: string
                  required:
                  - name
                  - number
                  - role
                  type: object
                type: array
              mode:
                type: string
              monitor:
                description: Monitor is the pvc config of etcd
                properties:
                  auto_clear_days:
                    description: AutoClearDays is the auto clear days
                    type: string
                  pvc_cap:
                    description: PvcCap is the pvc cap
                    type: string
                  pvc_type:
                    description: PvcType is the pvc type
                    type: string
                required:
                - auto_clear_days
                - pvc_cap
                - pvc_type
                type: object
              need_keep_alive:
                description: NeedKeepAlive is the flag to decide to keep alive the
                  machine_sets role
                items:
                  type: string
                type: array
              need_load_balancer:
                description: NeedLoadBalancer is the flag to decide to create loadBalancer
                items:
                  type: string
                type: array
              node_cidr:
                description: NodeCIDR is the node cidr of subnet which NetworkMode
                  is new
                type: string
              other_ansible_opts:
                additionalProperties:
                  type: string
                description: OtherAnsibleOpts is the ansible custome vars OtherAnsibleOpts
                  => ansible test/vars.yaml
                type: object
              paused:
                description: Paused is the flag to pause the plan
                type: boolean
              pod_cidr:
                description: PodCidr is the pod cidr
                type: string
              ssh_key:
                description: SshKey is the all cluster machine's public key Maybe
                  we should create a new ssh pair for every cluster SshKey is the
                  public key of the pair
                type: string
              support_python3:
                description: SupportPython3 is the flag to decide to ansible use python3
                  version
                type: boolean
              svc_cidr:
                description: SvcCidr is the svc cidr
                type: string
              use_float_ip:
                description: UseFloatIP decied to get fips or no
                type: boolean
              user:
                description: UserInfo is the user of keystone auth
                properties:
                  auth_url:
                    description: AuthUrl is the auth url of keystone
                    type: string
                  region:
                    description: Region is the region of keystone
                    type: string
                  token:
                    description: Token is the token of keystone,expired time is 6h
                    type: string
                required:
                - auth_url
                - region
                - token
                type: object
            required:
            - cluster_name
            - cni_type
            - k8sVersion
            - lb_enable
            - machine_sets
            - mode
            - monitor
            - need_keep_alive
            - need_load_balancer
            - ssh_key
            - support_python3
            - use_float_ip
            type: object
          status:
            description: PlanStatus defines the observed state of Plan
            properties:
              infra_machine:
                additionalProperties:
                  properties:
                    ha_port_id:
                      description: HAPortID is the port id of HA
                      type: string
                    ha_private_ip:
                      description: HAPrivateIP is the ip of HA
                      type: string
                    ha_public_ip:
                      description: HAPublicIP is the public ip of HA
                      type: string
                    ips:
                      additionalProperties:
                        type: string
                      description: IPs is the ips of machine,key is the instance name(openstackMachine
                        name),value is the ip
                      type: object
                    port_ids:
                      description: PortIDs is the port id of machines
                      items:
                        type: string
                      type: array
                    role:
                      description: Role is the role of machine
                      type: string
                  type: object
                description: InfraMachine is the list of infra machine,key is set
                  role name,value is the InfraMachine
                type: object
              openstack_machine_list:
                description: OpenstackMachineList is the list of openstack machine
                items:
                  description: OpenStackMachine is the Schema for the openstackmachines
                    API.
                  properties:
                    apiVersion:
                      description: 'APIVersion defines the versioned schema of this
                        representation of an object. Servers should convert recognized
                        schemas to the latest internal value, and may reject unrecognized
                        values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                      type: string
                    kind:
                      description: 'Kind is a string value representing the REST resource
                        this object represents. Servers may infer this from the endpoint
                        the client submits requests to. Cannot be updated. In CamelCase.
                        More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                      type: string
                    metadata:
                      type: object
                    spec:
                      description: OpenStackMachineSpec defines the desired state
                        of OpenStackMachine.
                      properties:
                        cloudName:
                          description: The name of the cloud to use from the clouds
                            secret
                          type: string
                        configDrive:
                          description: Config Drive support
                          type: boolean
                        customeVolumes:
                          description: The custome metadata to boot from
                          items:
                            properties:
                              availabilityZone:
                                type: string
                              diskSize:
                                type: integer
                              volumeType:
                                type: string
                            type: object
                          type: array
                        flavor:
                          description: The flavor reference for the flavor for your
                            server instance.
                          type: string
                        floatingIP:
                          description: The floatingIP which will be associated to
                            the machine, only used for master. The floatingIP should
                            have been created and haven't been associated.
                          type: string
                        identityRef:
                          description: IdentityRef is a reference to a identity to
                            be used when reconciling this cluster
                          properties:
                            kind:
                              description: Kind of the identity. Must be supported
                                by the infrastructure provider and may be either cluster
                                or namespace-scoped.
                              minLength: 1
                              type: string
                            name:
                              description: Name of the infrastructure identity to
                                be used. Must be either a cluster-scoped resource,
                                or namespaced-scoped resource the same namespace as
                                the resource(s) being provisioned.
                              type: string
                          required:
                          - kind
                          - name
                          type: object
                        image:
                          description: The name of the image to use for your server
                            instance. If the RootVolume is specified, this will be
                            ignored and use rootVolume directly.
                          type: string
                        imageUUID:
                          description: The uuid of the image to use for your server
                            instance. if it's empty, Image name will be used
                          type: string
                        instanceID:
                          description: InstanceID is the OpenStack instance ID for
                            this machine.
                          type: string
                        networks:
                          description: A networks object. Required parameter when
                            there are multiple networks defined for the tenant. When
                            you do not specify both networks and ports parameters,
                            the server attaches to the only network created for the
                            current tenant.
                          items:
                            properties:
                              filter:
                                description: Filters for optional network query
                                properties:
                                  description:
                                    type: string
                                  id:
                                    type: string
                                  name:
                                    type: string
                                  notTags:
                                    type: string
                                  notTagsAny:
                                    type: string
                                  projectId:
                                    type: string
                                  tags:
                                    type: string
                                  tagsAny:
                                    type: string
                                type: object
                              fixedIP:
                                description: A fixed IPv4 address for the NIC.
                                type: string
                              subnets:
                                description: Subnet within a network to use
                                items:
                                  properties:
                                    filter:
                                      description: Filters for optional subnet query
                                      properties:
                                        cidr:
                                          type: string
                                        description:
                                          type: string
                                        gateway_ip:
                                          type: string
                                        id:
                                          type: string
                                        ipVersion:
                                          type: integer
                                        ipv6AddressMode:
                                          type: string
                                        ipv6RaMode:
                                          type: string
                                        name:
                                          type: string
                                        notTags:
                                          type: string
                                        notTagsAny:
                                          type: string
                                        projectId:
                                          type: string
                                        tags:
                                          type: string
                                        tagsAny:
                                          type: string
                                      type: object
                                    uuid:
                                      description: Optional UUID of the subnet. If
                                        specified this will not be validated prior
                                        to server creation. If specified, the enclosing
                                        `NetworkParam` must also be specified by UUID.
                                      type: string
                                  type: object
                                type: array
                              uuid:
                                description: Optional UUID of the network. If specified
                                  this will not be validated prior to server creation.
                                  Required if `Subnets` specifies a subnet by UUID.
                                type: string
                            type: object
                          type: array
                        ports:
                          description: Ports to be attached to the server instance.
                            They are created if a port with the given name does not
                            already exist. When you do not specify both networks and
                            ports parameters, the server attaches to the only network
                            created for the current tenant.
                          items:
                            properties:
                              adminStateUp:
                                type: boolean
                              allowedAddressPairs:
                                items:
                                  properties:
                                    ipAddress:
                                      type: string
                                    macAddress:
                                      type: string
                                  type: object
                                type: array
                              description:
                                type: string
                              disablePortSecurity:
                                description: DisablePortSecurity enables or disables
                                  the port security when set. When not set, it takes
                                  the value of the corresponding field at the network
                                  level.
                                type: boolean
                              fixedIPs:
                                description: Specify pairs of subnet and/or IP address.
                                  These should be subnets of the network with the
                                  given NetworkID.
                                items:
                                  properties:
                                    ipAddress:
                                      type: string
                                    subnet:
                                      description: Subnet is an openstack subnet query
                                        that will return the id of a subnet to create
                                        the fixed IP of a port in. This query must
                                        not return more than one subnet.
                                      properties:
                                        cidr:
                                          type: string
                                        description:
                                          type: string
                                        gateway_ip:
                                          type: string
                                        id:
                                          type: string
                                        ipVersion:
                                          type: integer
                                        ipv6AddressMode:
                                          type: string
                                        ipv6RaMode:
                                          type: string
                                        name:
                                          type: string
                                        notTags:
                                          type: string
                                        notTagsAny:
                                          type: string
                                        projectId:
                                          type: string
                                        tags:
                                          type: string
                                        tagsAny:
                                          type: string
                                      type: object
                                  required:
                                  - subnet
                                  type: object
                                type: array
                              hostId:
                                description: The ID of the host where the port is
                                  allocated
                                type: string
                              macAddress:
                                type: string
                              nameSuffix:
                                description: Used to make the name of the port unique.
                                  If unspecified, instead the 0-based index of the
                                  port in the list is used.
                                type: string
                              network:
                                description: Network is a query for an openstack network
                                  that the port will be created or discovered on.
                                  This will fail if the query returns more than one
                                  network.
                                properties:
                                  description:
                                    type: string
                                  id:
                                    type: string
                                  name:
                                    type: string
                                  notTags:
                                    type: string
                                  notTagsAny:
                                    type: string
                                  projectId:
                                    type: string
                                  tags:
                                    type: string
                                  tagsAny:
                                    type: string
                                type: object
                              profile:
                                additionalProperties:
                                  type: string
                                description: A dictionary that enables the application
                                  running on the specified host to pass and receive
                                  virtual network interface (VIF) port-specific information
                                  to the plug-in.
                                type: object
                              projectId:
                                type: string
                              securityGroupFilters:
                                description: The names, uuids, filters or any combination
                                  these of the security groups to assign to the instance
                                items:
                                  properties:
                                    filter:
                                      description: Filters used to query security
                                        groups in openstack
                                      properties:
                                        description:
                                          type: string
                                        id:
                                          type: string
                                        limit:
                                          type: integer
                                        marker:
                                          type: string
                                        name:
                                          type: string
                                        notTags:
                                          type: string
                                        notTagsAny:
                                          type: string
                                        projectId:
                                          type: string
                                        sortDir:
                                          type: string
                                        sortKey:
                                          type: string
                                        tags:
                                          type: string
                                        tagsAny:
                                          type: string
                                        tenantId:
                                          type: string
                                      type: object
                                    name:
                                      description: Security Group name
                                      type: string
                                    uuid:
                                      description: Security Group UID
                                      type: string
                                  type: object
                                type: array
                              securityGroups:
                                description: The uuids of the security groups to assign
                                  to the instance
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: set
                              tags:
                                description: Tags applied to the port (and corresponding
                                  trunk, if a trunk is configured.) These tags are
                                  applied in addition to the instance's tags, which
                                  will also be applied to the port.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: set
                              tenantId:
                                type: string
                              trunk:
                                description: Enables and disables trunk at port level.
                                  If not provided, openStackMachine.Spec.Trunk is
                                  inherited.
                                type: boolean
                              vnicType:
                                description: The virtual network interface card (vNIC)
                                  type that is bound to the neutron port.
                                type: string
                            type: object
                          type: array
                        providerID:
                          description: ProviderID is the unique identifier as specified
                            by the cloud provider.
                          type: string
                        rootVolume:
                          description: The volume metadata to boot from
                          properties:
                            availabilityZone:
                              type: string
                            diskSize:
                              type: integer
                            volumeType:
                              type: string
                          type: object
                        securityGroups:
                          description: The names of the security groups to assign
                            to the instance
                          items:
                            properties:
                              filter:
                                description: Filters used to query security groups
                                  in openstack
                                properties:
                                  description:
                                    type: string
                                  id:
                                    type: string
                                  limit:
                                    type: integer
                                  marker:
                                    type: string
                                  name:
                                    type: string
                                  notTags:
                                    type: string
                                  notTagsAny:
                                    type: string
                                  projectId:
                                    type: string
                                  sortDir:
                                    type: string
                                  sortKey:
                                    type: string
                                  tags:
                                    type: string
                                  tagsAny:
                                    type: string
                                  tenantId:
                                    type: string
                                type: object
                              name:
                                description: Security Group name
                                type: string
                              uuid:
                                description: Security Group UID
                                type: string
                            type: object
                          type: array
                        serverGroupID:
                          description: The server group to assign the machine to
                          type: string
                        serverMetadata:
                          additionalProperties:
                            type: string
                          description: Metadata mapping. Allows you to create a map
                            of key value pairs to add to the server instance.
                          type: object
                        sshKeyName:
                          description: The ssh key to inject in the instance
                          type: string
                        subnet:
                          description: UUID, IP address of a port from this subnet
                            will be marked as AccessIPv4 on the created compute instance
                          type: string
                        tags:
                          description: Machine tags Requires Nova api 2.52 minimum!
                          items:
                            type: string
                          type: array
                          x-kubernetes-list-type: set
                        trunk:
                          description: Whether the server instance is created on a
                            trunk port or not.
                          type: boolean
                      required:
                      - flavor
                      type: object
                    status:
                      description: OpenStackMachineStatus defines the observed state
                        of OpenStackMachine.
                      properties:
                        addresses:
                          description: Addresses contains the OpenStack instance associated
                            addresses.
                          items:
                            description: NodeAddress contains information for the
                              node's address.
                            properties:
                              address:
                                description: The node address.
                                type: string
                              type:
                                description: Node address type, one of Hostname, ExternalIP
                                  or InternalIP.
                                type: string
                            required:
                            - address
                            - type
                            type: object
                          type: array
                        conditions:
                          description: Conditions provide observations of the operational
                            state of a Cluster API resource.
                          items:
                            description: Condition defines an observation of a Cluster
                              API resource operational state.
                            properties:
                              lastTransitionTime:
                                description: Last time the condition transitioned
                                  from one status to another. This should be when
                                  the underlying condition changed. If that is not
                                  known, then using the time when the API field changed
                                  is acceptable.
                                format: date-time
                                type: string
                              message:
                                description: A human readable message indicating details
                                  about the transition. This field may be empty.
                                type: string
                              reason:
                                description: The reason for the condition's last transition
                                  in CamelCase. The specific API may choose whether
                                  or not this field is considered a guaranteed API.
                                  This field may not be empty.
                                type: string
                              severity:
                                description: Severity provides an explicit classification
                                  of Reason code, so the users or machines can immediately
                                  understand the current situation and act accordingly.
                                  The Severity field MUST be set only when Status=False.
                                type: string
                              status:
                                description: Status of the condition, one of True,
                                  False, Unknown.
                                type: string
                              type:
                                description: Type of condition in CamelCase or in
                                  foo.example.com/CamelCase. Many .condition.type
                                  values are consistent across resources like Available,
                                  but because arbitrary conditions can be useful (see
                                  .node.status.conditions), the ability to deconflict
                                  is important.
                                type: string
                            required:
                            - lastTransitionTime
                            - status
                            - type
                            type: object
                          type: array
                        failureMessage:
                          description: "FailureMessage will be set in the event that
                            there is a terminal problem reconciling the Machine and
                            will contain a more verbose string suitable for logging
                            and human consumption. \n This field should not be set
                            for transitive errors that a controller faces that are
                            expected to be fixed automatically over time (like service
                            outages), but instead indicate that something is fundamentally
                            wrong with the Machine's spec or the configuration of
                            the controller, and that manual intervention is required.
                            Examples of terminal errors would be invalid combinations
                            of settings in the spec, values that are unsupported by
                            the controller, or the responsible controller itself being
                            critically misconfigured. \n Any transient errors that
                            occur during the reconciliation of Machines can be added
                            as events to the Machine object and/or logged in the controller's
                            output."
                          type: string
                        failureReason:
                          description: MachineStatusError defines errors states for
                            Machine objects.
                          type: string
                        instanceState:
                          description: InstanceState is the state of the OpenStack
                            instance for this machine.
                          type: string
                        ready:
                          description: Ready is true when the provider resource is
                            ready.
                          type: boolean
                      type: object
                  type: object
                type: array
              planLoadBalancer:
                description: PlanLoadBalancer is the list of load balancer of plan
                items:
                  description: LoadBalancer represents basic information about the
                    associated OpenStack LoadBalancer.
                  properties:
                    allowedCIDRs:
                      items:
                        type: string
                      type: array
                    id:
                      type: string
                    internalIP:
                      type: string
                    ip:
                      type: string
                    name:
                      type: string
                  required:
                  - id
                  - internalIP
                  - ip
                  - name
                  type: object
                type: array
              server_group_id:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state
                  of cluster Important: Run "make" to regenerate code after modifying
                  this file ServerGroupID is the server group id of cluster'
                properties:
                  master_server_group_id:
                    description: MasterServerGroupID is the server group id of master
                      machine
                    type: string
                  worker_server_group_id:
                    description: WorkerServerGroupID is the server group id of worker
                      machine
                    type: string
                type: object
              vm_done:
                description: VMDone show the vm is created or not
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
